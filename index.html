<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Galileo Design</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&family=Be+Vietnam+Pro:wght@400;500;700;900&family=Noto+Sans:wght@400;500;700;900"
    />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />

    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

    <style>
      /* Hide scrollbar for Chrome, Safari and Opera */
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
      
      /* Hide scrollbar for IE, Edge and Firefox */
      .no-scrollbar {
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
      }

      /* Add padding to main content to account for fixed navigation */
      .main-content {
        padding-bottom: 80px;
      }

      /* Theme styles */
      :root {
        --bg-primary: #111218;
        --bg-secondary: #1c1e27;
        --bg-tertiary: #282b39;
        --text-primary: #ffffff;
        --text-secondary: #9da2b9;
        --border-color: #3b4054;
      }

      [data-theme="light"] {
        --bg-primary: #f5f5f5;
        --bg-secondary: #ffffff;
        --bg-tertiary: #e5e5e5;
        --text-primary: #000000;
        --text-secondary: #666666;
        --border-color: #d1d1d1;
      }

      body {
        background-color: var(--bg-primary);
        color: var(--text-primary);
      }

      .bg-primary {
        background-color: var(--bg-primary);
      }

      .bg-secondary {
        background-color: var(--bg-secondary);
      }

      .bg-tertiary {
        background-color: var(--bg-tertiary);
      }

      .text-primary {
        color: var(--text-primary);
      }

      .text-secondary {
        color: var(--text-secondary);
      }

      .border-color {
        border-color: var(--border-color);
      }

      /* Mini player styles */
      .mini-player {
        transition: transform 0.3s ease;
      }
      .mini-player.hidden {
        transform: translateY(100%);
      }

      /* Full screen player styles */
      .full-player {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: #111218;
        z-index: 100;
        transform: translateY(100%);
        transition: transform 0.3s ease;
      }
      .full-player.active {
        transform: translateY(0);
      }
      .player-background {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 50vh;
        background-size: cover;
        background-position: center;
        filter: blur(20px);
        opacity: 0.3;
      }

      /* Enhanced player styles */
      .player-controls {
        transition: all 0.3s ease;
      }
      .player-controls:hover {
        transform: scale(1.05);
      }
      .progress-container {
        cursor: pointer;
      }
      .progress-bar {
        transition: width 0.1s linear;
      }
      .player-button {
        transition: all 0.2s ease;
      }
      .player-button:hover {
        transform: scale(1.1);
        opacity: 0.8;
      }
      .player-button:active {
        transform: scale(0.95);
      }

      /* Loading spinner styles */
      .loading-spinner {
        width: 24px;
        height: 24px;
        border: 2px solid #ffffff;
        border-radius: 50%;
        border-top-color: transparent;
        animation: spin 1s linear infinite;
      }
      @keyframes spin {
        to { transform: rotate(360deg); }
      }
      .loading-text {
        color: #9da2b9;
        font-size: 0.75rem;
        margin-left: 8px;
      }
      .loading-container {
        display: flex;
        align-items: center;
      }

      /* Skeleton loader styles */
      .skeleton {
        background: linear-gradient(90deg, #282b39 25%, #3b4054 50%, #282b39 75%);
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
        border-radius: 8px;
      }
      @keyframes shimmer {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
      }
      .skeleton-text {
        height: 16px;
        margin-bottom: 8px;
      }
      .skeleton-text:last-child {
        margin-bottom: 0;
        width: 60%;
      }
      .skeleton-image {
        width: 100%;
        aspect-ratio: 1;
      }
    </style>
  </head>
  <body
    class="relative flex min-h-screen flex-col justify-between group/design-root overflow-x-hidden"
    style='font-family: "Be Vietnam Pro", "Noto Sans", sans-serif;'
    data-theme="dark"
  >
    <div class="main-content">
    <!-- Header -->
      <header class="flex items-center bg-primary p-4 pb-2 justify-between">
        <h2 class="text-primary text-lg font-bold leading-tight tracking-[-0.015em] flex-1">Good evening</h2>
      <div class="flex w-12 items-center justify-end">
        <button
            id="theme-toggle"
            class="flex h-12 items-center justify-center rounded-xl text-primary text-base font-bold bg-transparent"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
            <path
              d="M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm88-29.84q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.21,107.21,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.71,107.71,0,0,0-26.25-10.87,8,8,0,0,0-7.06,1.49L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.21,107.21,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06Z"
            />
          </svg>
        </button>
      </div>
    </header>

      <!-- Home Section -->
      <div id="home-section">
        <!-- Trending Section -->
        <section class="px-4 pb-6">
          <h2 class="text-white text-[22px] font-bold tracking-[-0.015em] pb-3 pt-5">Trending Now</h2>
          <div class="flex gap-4 overflow-x-auto no-scrollbar">
            <div class="flex flex-col gap-2 min-w-40">
              <div
                class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl relative group cursor-pointer"
                style='background-image: url("https://cdn.usegalileo.ai/sdxl10/90474b29-fd3c-443e-9a96-d35c64b4127a.png");'
                onclick="playTrendingSong('Shape of You', 'Ed Sheeran', 'https://cdn.usegalileo.ai/sdxl10/90474b29-fd3c-443e-9a96-d35c64b4127a.png')"
              >
                <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-xl flex items-center justify-center">
                  <button class="text-white bg-white/10 rounded-full p-3 hover:bg-white/20 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                      <path d="M240,128a15.74,15.74,0,0,1-7.6,13.51L88.32,229.65a16,16,0,0,1-16.2.3A15.86,15.86,0,0,1,64,216.13V39.87a15.86,15.86,0,0,1,8.12-13.82,16,16,0,0,1,16.2.3L232.4,114.49A15.74,15.74,0,0,1,240,128Z"/>
                    </svg>
                  </button>
                </div>
              </div>
              <div>
                <p class="text-white text-base font-medium">Shape of You</p>
                <p class="text-[#9da2b9] text-sm">Ed Sheeran</p>
              </div>
            </div>
            <div class="flex flex-col gap-2 min-w-40">
              <div
                class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl relative group cursor-pointer"
                style='background-image: url("https://cdn.usegalileo.ai/sdxl10/b732ba8d-001a-4113-b7fb-c4eb22416259.png");'
                onclick="playTrendingSong('Blinding Lights', 'The Weeknd', 'https://cdn.usegalileo.ai/sdxl10/b732ba8d-001a-4113-b7fb-c4eb22416259.png')"
              >
                <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-xl flex items-center justify-center">
                  <button class="text-white bg-white/10 rounded-full p-3 hover:bg-white/20 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                      <path d="M240,128a15.74,15.74,0,0,1-7.6,13.51L88.32,229.65a16,16,0,0,1-16.2.3A15.86,15.86,0,0,1,64,216.13V39.87a15.86,15.86,0,0,1,8.12-13.82,16,16,0,0,1,16.2.3L232.4,114.49A15.74,15.74,0,0,1,240,128Z"/>
                    </svg>
                  </button>
                </div>
              </div>
              <div>
                <p class="text-white text-base font-medium">Blinding Lights</p>
                <p class="text-[#9da2b9] text-sm">The Weeknd</p>
              </div>
            </div>
            <div class="flex flex-col gap-2 min-w-40">
              <div
                class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl relative group cursor-pointer"
                style='background-image: url("https://cdn.usegalileo.ai/sdxl10/1972dfc7-0599-4467-a332-9b146b809deb.png");'
                onclick="playTrendingSong('Stay', 'The Kid LAROI, Justin Bieber', 'https://cdn.usegalileo.ai/sdxl10/1972dfc7-0599-4467-a332-9b146b809deb.png')"
              >
                <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-xl flex items-center justify-center">
                  <button class="text-white bg-white/10 rounded-full p-3 hover:bg-white/20 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                      <path d="M240,128a15.74,15.74,0,0,1-7.6,13.51L88.32,229.65a16,16,0,0,1-16.2.3A15.86,15.86,0,0,1,64,216.13V39.87a15.86,15.86,0,0,1,8.12-13.82,16,16,0,0,1,16.2.3L232.4,114.49A15.74,15.74,0,0,1,240,128Z"/>
                    </svg>
                  </button>
                </div>
              </div>
              <div>
                <p class="text-white text-base font-medium">Stay</p>
                <p class="text-[#9da2b9] text-sm">The Kid LAROI, Justin Bieber</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Trending Playlists -->
        <section class="px-4 pb-6">
          <h2 class="text-white text-[22px] font-bold tracking-[-0.015em] pb-3">Trending Playlists</h2>
          <div class="flex gap-4 overflow-x-auto no-scrollbar">
            <div class="flex flex-col gap-2 min-w-40">
              <div
                class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl relative group cursor-pointer"
                style='background-image: url("https://cdn.usegalileo.ai/sdxl10/11936ebb-c876-4087-8715-a0aad992f81d.png");'
                onclick="playTrendingPlaylist('Today\'s Top Hits', 'The most popular songs right now', 'https://cdn.usegalileo.ai/sdxl10/11936ebb-c876-4087-8715-a0aad992f81d.png')"
              >
                <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-xl flex items-center justify-center">
                  <button class="text-white bg-white/10 rounded-full p-3 hover:bg-white/20 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                      <path d="M240,128a15.74,15.74,0,0,1-7.6,13.51L88.32,229.65a16,16,0,0,1-16.2.3A15.86,15.86,0,0,1,64,216.13V39.87a15.86,15.86,0,0,1,8.12-13.82,16,16,0,0,1,16.2.3L232.4,114.49A15.74,15.74,0,0,1,240,128Z"/>
                    </svg>
                  </button>
                </div>
              </div>
              <div>
                <p class="text-white text-base font-medium">Today's Top Hits</p>
                <p class="text-[#9da2b9] text-sm">The most popular songs right now</p>
              </div>
            </div>
            <div class="flex flex-col gap-2 min-w-40">
              <div
                class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl relative group cursor-pointer"
                style='background-image: url("https://cdn.usegalileo.ai/sdxl10/525f1425-9894-41fc-9978-6b218cf99590.png");'
                onclick="playTrendingPlaylist('RapCaviar', 'New music from Drake, Kendrick Lamar and more', 'https://cdn.usegalileo.ai/sdxl10/525f1425-9894-41fc-9978-6b218cf99590.png')"
              >
                <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-xl flex items-center justify-center">
                  <button class="text-white bg-white/10 rounded-full p-3 hover:bg-white/20 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                      <path d="M240,128a15.74,15.74,0,0,1-7.6,13.51L88.32,229.65a16,16,0,0,1-16.2.3A15.86,15.86,0,0,1,64,216.13V39.87a15.86,15.86,0,0,1,8.12-13.82,16,16,0,0,1,16.2.3L232.4,114.49A15.74,15.74,0,0,1,240,128Z"/>
                    </svg>
                  </button>
                </div>
              </div>
              <div>
                <p class="text-white text-base font-medium">RapCaviar</p>
                <p class="text-[#9da2b9] text-sm">New music from Drake, Kendrick Lamar and more</p>
              </div>
            </div>
            <div class="flex flex-col gap-2 min-w-40">
              <div
                class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl relative group cursor-pointer"
                style='background-image: url("https://cdn.usegalileo.ai/sdxl10/c035e31c-aa71-47aa-91c4-1d6dbf329ea1.png");'
                onclick="playTrendingPlaylist('Rock Classics', 'Rock legends & epic songs', 'https://cdn.usegalileo.ai/sdxl10/c035e31c-aa71-47aa-91c4-1d6dbf329ea1.png')"
              >
                <div class="absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-xl flex items-center justify-center">
                  <button class="text-white bg-white/10 rounded-full p-3 hover:bg-white/20 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                      <path d="M240,128a15.74,15.74,0,0,1-7.6,13.51L88.32,229.65a16,16,0,0,1-16.2.3A15.86,15.86,0,0,1,64,216.13V39.87a15.86,15.86,0,0,1,8.12-13.82,16,16,0,0,1,16.2.3L232.4,114.49A15.74,15.74,0,0,1,240,128Z"/>
                    </svg>
                  </button>
                </div>
              </div>
              <div>
                <p class="text-white text-base font-medium">Rock Classics</p>
                <p class="text-[#9da2b9] text-sm">Rock legends & epic songs</p>
              </div>
            </div>
          </div>
        </section>

    <!-- Tags -->
    <section class="flex gap-3 p-3 overflow-x-auto">
      <div class="flex h-8 items-center justify-center gap-2 rounded-xl bg-[#282b39] px-4">
        <p class="text-white text-sm font-medium">Music</p>
      </div>
      <div class="flex h-8 items-center justify-center gap-2 rounded-xl bg-[#282b39] px-4">
        <p class="text-white text-sm font-medium">Podcasts</p>
      </div>
      <div class="flex h-8 items-center justify-center gap-2 rounded-xl bg-[#282b39] px-4">
        <p class="text-white text-sm font-medium">Audiobooks</p>
      </div>
    </section>

    <!-- Grid Albums -->
    <section class="grid grid-cols-[repeat(auto-fit,minmax(158px,1fr))] gap-3 p-4">
      <div class="flex items-center gap-3 rounded-lg border border-[#3b4054] bg-[#1c1e27] p-4">
        <div
          class="bg-center bg-no-repeat aspect-square bg-cover rounded-lg w-10"
          style='background-image: url("https://cdn.usegalileo.ai/sdxl10/90474b29-fd3c-443e-9a96-d35c64b4127a.png");'
        ></div>
        <h2 class="text-white text-base font-bold">Indie Summer</h2>
      </div>
          <div class="flex items-center gap-3 rounded-lg border border-[#3b4054] bg-[#1c1e27] p-4">
            <div
              class="bg-center bg-no-repeat aspect-square bg-cover rounded-lg w-10"
              style='background-image: url("https://cdn.usegalileo.ai/sdxl10/b732ba8d-001a-4113-b7fb-c4eb22416259.png");'
            ></div>
            <h2 class="text-white text-base font-bold">Electronic Dreams</h2>
          </div>
          <div class="flex items-center gap-3 rounded-lg border border-[#3b4054] bg-[#1c1e27] p-4">
            <div
              class="bg-center bg-no-repeat aspect-square bg-cover rounded-lg w-10"
              style='background-image: url("https://cdn.usegalileo.ai/sdxl10/1972dfc7-0599-4467-a332-9b146b809deb.png");'
            ></div>
            <h2 class="text-white text-base font-bold">Roadtrip Vibes</h2>
          </div>
    </section>

        <!-- Made for Ezra Section -->
    <section class="px-4 pb-6">
      <h2 class="text-white text-[22px] font-bold tracking-[-0.015em] pb-3 pt-5">Made for Ezra</h2>
      <div class="flex gap-4 overflow-x-auto">
        <div class="flex flex-col gap-2 min-w-40">
          <div
            class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl"
            style='background-image: url("https://cdn.usegalileo.ai/sdxl10/11936ebb-c876-4087-8715-a0aad992f81d.png");'
          ></div>
          <div>
            <p class="text-white text-base font-medium">Acoustic Serenity</p>
            <p class="text-[#9da2b9] text-sm">Peaceful acoustic tracks</p>
          </div>
        </div>
            <div class="flex flex-col gap-2 min-w-40">
              <div
                class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl"
                style='background-image: url("https://cdn.usegalileo.ai/sdxl10/525f1425-9894-41fc-9978-6b218cf99590.png");'
              ></div>
              <div>
                <p class="text-white text-base font-medium">Wanderlust Tracks</p>
                <p class="text-[#9da2b9] text-sm">Hannah Reese, Leo Bennett</p>
              </div>
            </div>
            <div class="flex flex-col gap-2 min-w-40">
              <div
                class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl"
                style='background-image: url("https://cdn.usegalileo.ai/sdxl10/c035e31c-aa71-47aa-91c4-1d6dbf329ea1.png");'
              ></div>
              <div>
                <p class="text-white text-base font-medium">Cabin Escape</p>
                <p class="text-[#9da2b9] text-sm">Miles Archer, Ava Hayes</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Recently Played Section -->
        <section class="px-4 pb-6">
          <h2 class="text-white text-[22px] font-bold tracking-[-0.015em] pb-3 pt-5">Recently played</h2>
          <div class="flex gap-4 overflow-x-auto">
            <div class="flex flex-col gap-2 min-w-40">
              <div
                class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl"
                style='background-image: url("https://cdn.usegalileo.ai/sdxl10/84be0076-3ebb-4af8-9612-eb0345d7c241.png");'
              ></div>
              <p class="text-white text-base font-medium">The Open Road</p>
            </div>
            <div class="flex flex-col gap-2 min-w-40">
              <div
                class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl"
                style='background-image: url("https://cdn.usegalileo.ai/sdxl10/f00e73bf-cf16-42b8-8594-c142146312e0.png");'
              ></div>
              <p class="text-white text-base font-medium">Guitar Rhythms</p>
            </div>
            <div class="flex flex-col gap-2 min-w-40">
              <div
                class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl"
                style='background-image: url("https://cdn.usegalileo.ai/sdxl10/dea5304c-56ab-4dba-abba-ff3a7673f48e.png");'
              ></div>
              <p class="text-white text-base font-medium">Summer Mixes</p>
            </div>
          </div>
        </section>

        <!-- Jump Back In Section -->
        <section class="px-4 pb-6">
          <h2 class="text-white text-[22px] font-bold tracking-[-0.015em] pb-3 pt-5">Jump back in</h2>
          <div class="flex gap-4 overflow-x-auto">
            <div class="flex flex-col gap-2 min-w-40">
              <div
                class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl"
                style='background-image: url("https://cdn.usegalileo.ai/sdxl10/b4027d20-8d84-4777-8a65-a102bddc4494.png");'
              ></div>
              <p class="text-white text-base font-medium">Discover Weekly</p>
            </div>
            <div class="flex flex-col gap-2 min-w-40">
              <div
                class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl"
                style='background-image: url("https://cdn.usegalileo.ai/sdxl10/2d713b9b-a6a3-4068-a9eb-5440937fc63e.png");'
              ></div>
              <p class="text-white text-base font-medium">Indie Chill Mix</p>
            </div>
            <div class="flex flex-col gap-2 min-w-40">
              <div
                class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl"
                style='background-image: url("https://cdn.usegalileo.ai/sdxl10/7601855a-ea16-402d-932a-e400d63acb09.png");'
              ></div>
              <p class="text-white text-base font-medium">Top Tracks 2022</p>
            </div>
          </div>
        </section>
      </div>

      <!-- Search Section -->
      <section id="search-section" class="px-4 pb-6 hidden">
        <div class="relative">
          <input
            type="text"
            id="search-input"
            placeholder="Search for music..."
            class="w-full bg-[#282b39] text-white rounded-xl px-4 py-3 pl-12 focus:outline-none focus:ring-2 focus:ring-[#3b4054]"
          />
          <div class="absolute left-4 top-1/2 transform -translate-y-1/2">
            <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
              <path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"/>
            </svg>
          </div>
        </div>
        <div id="search-results" class="mt-4 space-y-4"></div>
        <div id="search-loading" class="hidden mt-8">
          <div class="flex flex-col items-center justify-center gap-4">
            <div class="loading-spinner" style="width: 32px; height: 32px;"></div>
            <p class="text-[#9da2b9] text-sm">Searching for music...</p>
          </div>
        </div>
      </section>

      <!-- Library Section -->
      <section id="library-section" class="px-4 pb-6 hidden">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-white text-[22px] font-bold tracking-[-0.015em]">Your Library</h2>
          <button id="create-playlist-btn" class="text-white bg-[#282b39] px-4 py-2 rounded-xl hover:bg-[#3b4054] transition-colors">
            Create Playlist
          </button>
        </div>

        <!-- Create Playlist Modal -->
        <div id="create-playlist-modal" class="fixed inset-0 bg-black/50 z-50 hidden">
          <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#1c1e27] p-6 rounded-xl w-80">
            <h3 class="text-white text-lg font-bold mb-4">Create New Playlist</h3>
            <input type="text" id="playlist-name" placeholder="Playlist name" class="w-full bg-[#282b39] text-white rounded-xl px-4 py-3 mb-4 focus:outline-none focus:ring-2 focus:ring-[#3b4054]">
            <div class="flex justify-end gap-3">
              <button id="cancel-create-playlist" class="text-[#9da2b9] hover:text-white transition-colors">Cancel</button>
              <button id="save-playlist" class="text-white bg-[#282b39] px-4 py-2 rounded-xl hover:bg-[#3b4054] transition-colors">Create</button>
            </div>
          </div>
        </div>

        <!-- Playlists Container -->
        <div id="playlists-container" class="space-y-4">
          <!-- Playlists will be added here dynamically -->
      </div>
    </section>

      <!-- Add to Playlist Modal -->
      <div id="add-to-playlist-modal" class="fixed inset-0 bg-black/50 z-[200] hidden">
        <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#1c1e27] p-6 rounded-xl w-80">
          <h3 class="text-white text-lg font-bold mb-4">Add to Playlist</h3>
          <div id="playlist-list" class="space-y-2 max-h-60 overflow-y-auto">
            <!-- Playlists will be added here dynamically -->
          </div>
          <button id="cancel-add-to-playlist" class="mt-4 text-[#9da2b9] hover:text-white transition-colors">Cancel</button>
        </div>
      </div>

      <!-- Full Screen Player -->
      <div id="full-player" class="full-player">
        <div class="player-background" id="player-bg"></div>
        <div class="relative z-10 h-full flex flex-col">
          <div class="flex items-center justify-between p-4">
            <button id="close-player" class="text-white player-button">
              <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                <path d="M208.49,191.51a12,12,0,0,1-17,17L128,145,64.49,208.49a12,12,0,0,1-17-17L111,128,47.51,64.49a12,12,0,0,1,17-17L128,111l63.51-63.52a12,12,0,0,1,17,17L145,128Z"/>
              </svg>
            </button>
            <h3 class="text-white text-lg font-medium">Now Playing</h3>
            <div class="w-6"></div>
          </div>
          
          <div class="flex-1 flex flex-col items-center justify-center px-8">
            <div class="w-64 h-64 rounded-xl overflow-hidden mb-8 shadow-lg">
              <img id="full-player-thumbnail" src="" alt="Album cover" class="w-full h-full object-cover">
            </div>
            <h2 id="full-player-title" class="text-white text-xl font-bold mb-2 text-center"></h2>
            <p id="full-player-artist" class="text-[#9da2b9] text-sm mb-8"></p>
            
            <div id="full-player-loading" class="loading-container mb-8 hidden">
              <div class="loading-spinner" style="width: 32px; height: 32px;"></div>
              <span class="loading-text" style="font-size: 1rem;">Loading music...</span>
            </div>
            
            <div class="w-full mb-8">
              <div class="progress-container h-1 bg-[#282b39] rounded-full mb-2" id="progress-container">
                <div id="progress-bar" class="progress-bar h-full bg-white rounded-full" style="width: 0%"></div>
              </div>
              <div class="flex justify-between text-xs text-[#9da2b9]">
                <span id="current-time">0:00</span>
                <span id="duration">0:00</span>
              </div>
            </div>
            
            <div class="flex items-center justify-center gap-8">
              <button id="prev-btn-full" class="text-white player-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" fill="currentColor" viewBox="0 0 256 256">
                  <path d="M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32Zm0,176H48V48H208V208ZM80,128a8,8,0,0,0,8-8V72a8,8,0,0,0-16,0v48A8,8,0,0,0,80,128Zm112,0a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V136A8,8,0,0,0,192,128Z"/>
                </svg>
              </button>
              <button id="play-btn-full" class="text-white bg-white/10 rounded-full p-4 player-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" fill="currentColor" viewBox="0 0 256 256">
                  <path d="M240,128a15.74,15.74,0,0,1-7.6,13.51L88.32,229.65a16,16,0,0,1-16.2.3A15.86,15.86,0,0,1,64,216.13V39.87a15.86,15.86,0,0,1,8.12-13.82,16,16,0,0,1,16.2.3L232.4,114.49A15.74,15.74,0,0,1,240,128Z"/>
                </svg>
              </button>
              <button id="next-btn-full" class="text-white player-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" fill="currentColor" viewBox="0 0 256 256">
                  <path d="M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32Zm0,176H48V48H208V208ZM80,128a8,8,0,0,0,8-8V72a8,8,0,0,0-16,0v48A8,8,0,0,0,80,128Zm112,0a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V136A8,8,0,0,0,192,128Z"/>
                </svg>
              </button>
              <button id="add-to-playlist-btn" class="text-white player-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                  <path d="M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"/>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Hidden YouTube Player -->
      <div id="player" style="display: none;"></div>

      <!-- Fixed Bottom Navigation -->
      <nav class="fixed bottom-0 left-0 right-0 flex gap-2 border-t border-[#282b39] bg-[#1c1e27] px-4 pb-3 pt-2 z-50">
        <a class="flex flex-1 flex-col items-center justify-end gap-1 rounded-full text-white active-nav" href="#home" onclick="showSection('home')">
          <div class="flex h-8 items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
              <path d="M224,115.55V208a16,16,0,0,1-16,16H168a16,16,0,0,1-16-16V168a8,8,0,0,0-8-8H112a8,8,0,0,0-8,8v40a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V115.55a16,16,0,0,1,5.17-11.78l80-75.48.11-.11a16,16,0,0,1,21.53,0,1.14,1.14,0,0,0,.11.11l80,75.48A16,16,0,0,1,224,115.55Z"/>
            </svg>
          </div>
          <p class="text-white text-xs font-medium">Home</p>
        </a>
        <a class="flex flex-1 flex-col items-center justify-end gap-1 text-[#9da2b9]" href="#search" onclick="showSection('search')">
          <div class="flex h-8 items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
              <path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"/>
            </svg>
          </div>
          <p class="text-[#9da2b9] text-xs font-medium">Search</p>
        </a>
        <a class="flex flex-1 flex-col items-center justify-end gap-1 text-[#9da2b9]" href="#library" onclick="showSection('library')">
          <div class="flex h-8 items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
              <path d="M164.44,105.34l-48-32A8,8,0,0,0,104,80v64a8,8,0,0,0,12.44,6.66l48-32a8,8,0,0,0,0-13.32ZM120,129.05V95l25.58,17ZM216,40H40A16,16,0,0,0,24,56V168a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,128H40V56H216V168Zm16,40a8,8,0,0,1-8,8H32a8,8,0,0,1,0-16H224A8,8,0,0,1,232,208Z"/>
            </svg>
          </div>
          <p class="text-[#9da2b9] text-xs font-medium">Your Library</p>
        </a>
      </nav>
    </div>

    <!-- Mini Player -->
    <div id="mini-player" class="mini-player fixed bottom-20 left-0 right-0 bg-[#1c1e27] p-4 flex items-center gap-4 border-t border-[#282b39] z-40">
      <div class="flex items-center gap-4 flex-1">
        <div class="w-12 h-12 bg-[#282b39] rounded-lg overflow-hidden">
          <img id="player-thumbnail" src="" alt="Album cover" class="w-full h-full object-cover">
        </div>
        <div class="flex-1">
          <h3 id="player-title" class="text-white text-sm font-medium">No song playing</h3>
          <p id="player-artist" class="text-[#9da2b9] text-xs">Select a song to play</p>
        </div>
      </div>
      <div class="flex items-center gap-4">
        <div id="mini-player-loading" class="loading-container hidden">
          <div class="loading-spinner"></div>
          <span class="loading-text">Loading...</span>
        </div>
        <button id="prev-btn" class="text-white">
          <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
            <path d="M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32Zm0,176H48V48H208V208ZM80,128a8,8,0,0,0,8-8V72a8,8,0,0,0-16,0v48A8,8,0,0,0,80,128Zm112,0a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V136A8,8,0,0,0,192,128Z"/>
          </svg>
        </button>
        <button id="play-btn" class="text-white">
          <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
            <path d="M240,128a15.74,15.74,0,0,1-7.6,13.51L88.32,229.65a16,16,0,0,1-16.2.3A15.86,15.86,0,0,1,64,216.13V39.87a15.86,15.86,0,0,1,8.12-13.82,16,16,0,0,1,16.2.3L232.4,114.49A15.74,15.74,0,0,1,240,128Z"/>
          </svg>
        </button>
        <button id="next-btn" class="text-white">
          <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
            <path d="M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32Zm0,176H48V48H208V208ZM80,128a8,8,0,0,0,8-8V72a8,8,0,0,0-16,0v48A8,8,0,0,0,80,128Zm112,0a8,8,0,0,0-8,8v48a8,8,0,0,0,16,0V136A8,8,0,0,0,192,128Z"/>
          </svg>
        </button>
      </div>
    </div>

    <script>
      const API_KEY = 'AIzaSyB0nNrAe6mwosu5z5gjrNGI69ILFLM4Yeg';
      let currentVideo = null;
      let player = null;
      let isPlaying = false;
      let progressInterval;
      let currentPlaylist = null;
      let currentSongIndex = -1;
      let isPlayingRandom = false;

      // Function to handle navigation
      function showSection(sectionId) {
        // Hide all sections
        document.querySelectorAll('section, #home-section').forEach(section => {
          section.classList.add('hidden');
        });

        // Show selected section
        if (sectionId === 'home') {
          document.getElementById('home-section').classList.remove('hidden');
        } else {
          document.getElementById(`${sectionId}-section`).classList.remove('hidden');
        }

        // Update navigation styling
        document.querySelectorAll('nav a').forEach(link => {
          link.classList.remove('text-white');
          link.classList.add('text-[#9da2b9]');
          link.querySelector('p').classList.remove('text-white');
          link.querySelector('p').classList.add('text-[#9da2b9]');
        });

        const activeLink = document.querySelector(`a[href="#${sectionId}"]`);
        activeLink.classList.remove('text-[#9da2b9]');
        activeLink.classList.add('text-white');
        activeLink.querySelector('p').classList.remove('text-[#9da2b9]');
        activeLink.querySelector('p').classList.add('text-white');
      }

      // Initialize the app
      function initializeApp() {
        // Show home section by default
        document.getElementById('home-section').classList.remove('hidden');
        
        // Set up navigation event listeners
        document.querySelectorAll('nav a').forEach(link => {
          link.addEventListener('click', (e) => {
            e.preventDefault();
            const sectionId = link.getAttribute('href').substring(1);
            showSection(sectionId);
          });
        });

        // Set up search functionality
        const searchInput = document.getElementById('search-input');
        if (searchInput) {
          searchInput.addEventListener('input', debounce(handleSearch, 500));
        }
      }

      // Initialize when DOM is loaded
      document.addEventListener('DOMContentLoaded', initializeApp);

      // Search functionality
      async function handleSearch(e) {
        const query = e.target.value;
        if (query.length < 2) {
          document.getElementById('search-results').innerHTML = '';
          document.getElementById('search-loading').classList.add('hidden');
          return;
        }

        // Show loading indicator
        document.getElementById('search-results').innerHTML = `
          <div class="space-y-4">
            ${Array(5).fill().map(() => `
              <div class="flex items-center gap-4 p-3 rounded-lg bg-[#1c1e27]">
                <div class="w-12 h-12 skeleton rounded-lg"></div>
                <div class="flex-1">
                  <div class="skeleton skeleton-text"></div>
                  <div class="skeleton skeleton-text"></div>
                </div>
              </div>
            `).join('')}
          </div>
        `;
        document.getElementById('search-loading').classList.remove('hidden');

        try {
          const response = await fetch(
            `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(query + ' music')}&type=video&maxResults=10&key=${API_KEY}`
          );
          const data = await response.json();
          
          // Hide loading indicator
          document.getElementById('search-loading').classList.add('hidden');
          
          displayResults(data.items);
        } catch (error) {
          console.error('Error searching:', error);
          // Hide loading indicator on error
          document.getElementById('search-loading').classList.add('hidden');
          // Show error message
          document.getElementById('search-results').innerHTML = `
            <div class="text-center text-[#9da2b9] py-8">
              <p>Error searching for music. Please try again.</p>
            </div>
          `;
        }
      }

      function displayResults(items) {
        const resultsContainer = document.getElementById('search-results');
        resultsContainer.innerHTML = '';

        items.forEach(item => {
          const video = document.createElement('div');
          video.className = 'flex items-center gap-4 p-3 rounded-lg bg-[#1c1e27] cursor-pointer hover:bg-[#282b39]';
          video.innerHTML = `
            <img src="${item.snippet.thumbnails.default.url}" alt="${item.snippet.title}" class="w-12 h-12 rounded-lg">
            <div class="flex-1">
              <h3 class="text-white text-sm font-medium">${item.snippet.title}</h3>
              <p class="text-[#9da2b9] text-xs">${item.snippet.channelTitle}</p>
            </div>
          `;
          video.onclick = () => playVideo(item);
          resultsContainer.appendChild(video);
        });
      }

      function playVideo(video) {
        currentVideo = video;
        isPlayingRandom = !currentPlaylist; // Set random play mode if not in a playlist
        document.getElementById('player-thumbnail').src = video.snippet.thumbnails.default.url;
        document.getElementById('player-title').textContent = video.snippet.title;
        document.getElementById('player-artist').textContent = video.snippet.channelTitle;
        document.getElementById('mini-player').classList.remove('hidden');

        // Show loading indicators
        document.getElementById('mini-player-loading').classList.remove('hidden');
        document.getElementById('full-player-loading').classList.remove('hidden');

        // Update full player
        document.getElementById('full-player-thumbnail').src = video.snippet.thumbnails.default.url;
        document.getElementById('full-player-title').textContent = video.snippet.title;
        document.getElementById('full-player-artist').textContent = video.snippet.channelTitle;
        document.getElementById('player-bg').style.backgroundImage = `url(${video.snippet.thumbnails.default.url})`;

        // Update add to playlist button
        updateAddToPlaylistButton();

        // Load YouTube IFrame API
        if (!window.YT) {
          const tag = document.createElement('script');
          tag.src = 'https://www.youtube.com/iframe_api';
          const firstScriptTag = document.getElementsByTagName('script')[0];
          firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        } else {
          initializePlayer(video.id.videoId);
        }
      }

      function initializePlayer(videoId) {
        if (player) {
          player.destroy();
        }
        
        player = new YT.Player('player', {
          height: '0',
          width: '0',
          videoId: videoId,
          playerVars: {
            'autoplay': 1,
            'controls': 0,
            'enablejsapi': 1,
            'origin': window.location.origin
          },
          events: {
            'onReady': onPlayerReady,
            'onStateChange': onPlayerStateChange
          }
        });
      }

      // YouTube IFrame API callback
      function onYouTubeIframeAPIReady() {
        if (currentVideo) {
          initializePlayer(currentVideo.id.videoId);
        }
      }

      function onPlayerReady(event) {
        event.target.playVideo();
        isPlaying = true;
        updatePlayButton();
        startProgressUpdate();
        
        // Hide loading indicators
        document.getElementById('mini-player-loading').classList.add('hidden');
        document.getElementById('full-player-loading').classList.add('hidden');
      }

      function startProgressUpdate() {
        clearInterval(progressInterval);
        progressInterval = setInterval(updateProgress, 1000);
      }

      function updateProgress() {
        if (player && player.getCurrentTime) {
          const currentTime = player.getCurrentTime();
          const duration = player.getDuration();
          const progress = (currentTime / duration) * 100;
          
          document.getElementById('progress-bar').style.width = `${progress}%`;
          document.getElementById('current-time').textContent = formatTime(currentTime);
          document.getElementById('duration').textContent = formatTime(duration);
        }
      }

      function formatTime(seconds) {
        const minutes = Math.floor(seconds / 60);
        const remainingSeconds = Math.floor(seconds % 60);
        return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
      }

      function onPlayerStateChange(event) {
        if (event.data === YT.PlayerState.PLAYING) {
          isPlaying = true;
          updatePlayButton();
          startProgressUpdate();
        } else if (event.data === YT.PlayerState.PAUSED) {
          isPlaying = false;
          updatePlayButton();
          clearInterval(progressInterval);
        } else if (event.data === YT.PlayerState.ENDED) {
          isPlaying = false;
          updatePlayButton();
          clearInterval(progressInterval);
          
          // Handle next song based on context
          if (currentPlaylist && currentSongIndex >= 0) {
            // Play next song in playlist
            const nextIndex = currentSongIndex + 1;
            if (nextIndex < currentPlaylist.songs.length) {
              const nextSong = currentPlaylist.songs[nextIndex];
              const video = {
                id: { videoId: nextSong.id },
                snippet: {
                  title: nextSong.title,
                  channelTitle: nextSong.artist,
                  thumbnails: { default: { url: nextSong.thumbnail } }
                }
              };
              currentSongIndex = nextIndex;
              playVideo(video);
            }
          } else if (isPlayingRandom) {
            // Play similar song
            playSimilarSong();
          }
        }
      }

      function updatePlayButton() {
        const playBtn = document.getElementById('play-btn');
        const playBtnFull = document.getElementById('play-btn-full');
        const icon = isPlaying ? 
          '<path d="M216,48H40a8,8,0,0,0-8,8V200a8,8,0,0,0,8,8H216a8,8,0,0,0,8-8V56A8,8,0,0,0,216,48ZM40,200V56H216V200Z"/>' :
          '<path d="M240,128a15.74,15.74,0,0,1-7.6,13.51L88.32,229.65a16,16,0,0,1-16.2.3A15.86,15.86,0,0,1,64,216.13V39.87a15.86,15.86,0,0,1,8.12-13.82,16,16,0,0,1,16.2.3L232.4,114.49A15.74,15.74,0,0,1,240,128Z"/>';
        
        playBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">${icon}</svg>`;
        playBtnFull.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" fill="currentColor" viewBox="0 0 256 256">${icon}</svg>`;
      }

      function togglePlay() {
        if (player) {
          if (isPlaying) {
            player.pauseVideo();
          } else {
            player.playVideo();
          }
        }
      }

      // Add event listeners for play buttons
      document.getElementById('play-btn').addEventListener('click', togglePlay);
      document.getElementById('play-btn-full').addEventListener('click', togglePlay);

      // Progress bar click handler
      document.getElementById('progress-container').addEventListener('click', (e) => {
        if (player && player.getDuration) {
          const rect = e.target.getBoundingClientRect();
          const x = e.clientX - rect.left;
          const width = rect.width;
          const percentage = x / width;
          const duration = player.getDuration();
          const newTime = duration * percentage;
          
          player.seekTo(newTime);
          updateProgress();
        }
      });

      // Mini player click handler
      document.getElementById('mini-player').addEventListener('click', () => {
        document.getElementById('full-player').classList.add('active');
      });

      // Close full player
      document.getElementById('close-player').addEventListener('click', () => {
        document.getElementById('full-player').classList.remove('active');
      });

      // Utility function for debouncing
      function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }

      // Theme toggle functionality
      const themeToggle = document.getElementById('theme-toggle');
      const body = document.body;
      
      // Check for saved theme preference
      const savedTheme = localStorage.getItem('theme') || 'dark';
      body.setAttribute('data-theme', savedTheme);

      themeToggle.addEventListener('click', () => {
        const currentTheme = body.getAttribute('data-theme');
        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
        
        body.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
      });

      // Add these new functions for trending songs and playlists
      function playTrendingSong(title, artist, thumbnail) {
        isPlayingRandom = true;
        const searchQuery = `${title} ${artist} official audio`;
        document.getElementById('search-input').value = searchQuery;
        handleSearch({ target: { value: searchQuery } });
      }

      function playTrendingPlaylist(title, description, thumbnail) {
        isPlayingRandom = true;
        const searchQuery = `${title} playlist`;
        document.getElementById('search-input').value = searchQuery;
        handleSearch({ target: { value: searchQuery } });
      }

      // Playlist functionality
      let playlists = JSON.parse(localStorage.getItem('playlists')) || [];

      // Create playlist modal handlers
      document.getElementById('create-playlist-btn').addEventListener('click', () => {
        document.getElementById('create-playlist-modal').classList.remove('hidden');
      });

      document.getElementById('cancel-create-playlist').addEventListener('click', () => {
        document.getElementById('create-playlist-modal').classList.add('hidden');
      });

      document.getElementById('save-playlist').addEventListener('click', () => {
        const playlistName = document.getElementById('playlist-name').value.trim();
        if (playlistName) {
          const newPlaylist = {
            id: Date.now().toString(),
            name: playlistName,
            songs: []
          };
          playlists.push(newPlaylist);
          localStorage.setItem('playlists', JSON.stringify(playlists));
          document.getElementById('create-playlist-modal').classList.add('hidden');
          document.getElementById('playlist-name').value = '';
          renderPlaylists();
        }
      });

      // Add to playlist modal handlers
      document.getElementById('add-to-playlist-btn').addEventListener('click', () => {
        if (currentVideo) {
          document.getElementById('add-to-playlist-modal').classList.remove('hidden');
          renderPlaylistList();
        }
      });

      document.getElementById('cancel-add-to-playlist').addEventListener('click', () => {
        document.getElementById('add-to-playlist-modal').classList.add('hidden');
      });

      function renderPlaylistList() {
        const playlistList = document.getElementById('playlist-list');
        playlistList.innerHTML = '';
        
        playlists.forEach(playlist => {
          const playlistItem = document.createElement('div');
          playlistItem.className = 'flex items-center justify-between p-3 rounded-lg bg-[#282b39] cursor-pointer hover:bg-[#3b4054]';
          playlistItem.innerHTML = `
            <span class="text-white">${playlist.name}</span>
            <span class="text-[#9da2b9] text-sm">${playlist.songs.length} songs</span>
          `;
          playlistItem.addEventListener('click', () => {
            addToPlaylist(playlist.id);
          });
          playlistList.appendChild(playlistItem);
        });
      }

      function addToPlaylist(playlistId) {
        const playlist = playlists.find(p => p.id === playlistId);
        if (playlist && currentVideo) {
          const songExists = playlist.songs.some(song => song.id === currentVideo.id.videoId);
          if (!songExists) {
            playlist.songs.push({
              id: currentVideo.id.videoId,
              title: currentVideo.snippet.title,
              artist: currentVideo.snippet.channelTitle,
              thumbnail: currentVideo.snippet.thumbnails.default.url
            });
            localStorage.setItem('playlists', JSON.stringify(playlists));
            document.getElementById('add-to-playlist-modal').classList.add('hidden');
            
            // Show success message in full player
            const successMessage = document.createElement('div');
            successMessage.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#1c1e27] text-white px-6 py-3 rounded-lg shadow-lg z-[300]';
            successMessage.textContent = `Added to ${playlist.name}`;
            document.getElementById('full-player').appendChild(successMessage);
            setTimeout(() => successMessage.remove(), 2000);
            
            // Update the playlist list immediately
            renderPlaylistList();
            // Also update the playlists view if we're in the library section
            if (!document.getElementById('library-section').classList.contains('hidden')) {
              renderPlaylists();
            }
            
            // Update the add to playlist button
            updateAddToPlaylistButton();
          } else {
            // Show already exists message in full player
            const existsMessage = document.createElement('div');
            existsMessage.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[#1c1e27] text-white px-6 py-3 rounded-lg shadow-lg z-[300]';
            existsMessage.textContent = 'Song already in playlist';
            document.getElementById('full-player').appendChild(existsMessage);
            setTimeout(() => existsMessage.remove(), 2000);
          }
        }
      }

      function renderPlaylists() {
        const playlistsContainer = document.getElementById('playlists-container');
        playlistsContainer.innerHTML = '';

        if (playlists.length === 0) {
          playlistsContainer.innerHTML = `
            <div class="text-[#9da2b9] text-center py-8">
              <p>No playlists yet</p>
              <p class="text-sm mt-2">Create a playlist to start adding songs</p>
            </div>
          `;
          return;
        }

        // Show skeleton loading state
        playlistsContainer.innerHTML = `
          <div class="space-y-4">
            ${Array(3).fill().map(() => `
              <div class="flex items-center gap-4 p-4 rounded-lg bg-[#1c1e27]">
                <div class="w-16 h-16 skeleton rounded-lg"></div>
                <div class="flex-1">
                  <div class="skeleton skeleton-text"></div>
                  <div class="skeleton skeleton-text"></div>
                </div>
              </div>
            `).join('')}
          </div>
        `;

        // Simulate loading delay
        setTimeout(() => {
          playlistsContainer.innerHTML = '';
          playlists.forEach(playlist => {
            const playlistElement = document.createElement('div');
            playlistElement.className = 'flex items-center gap-4 p-4 rounded-lg bg-[#1c1e27] cursor-pointer hover:bg-[#282b39]';
            playlistElement.innerHTML = `
              <div class="w-16 h-16 bg-[#282b39] rounded-lg overflow-hidden">
                ${playlist.songs.length > 0 ? 
                  `<img src="${playlist.songs[0].thumbnail}" alt="Playlist cover" class="w-full h-full object-cover">` :
                  `<div class="w-full h-full flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                      <path d="M164.44,105.34l-48-32A8,8,0,0,0,104,80v64a8,8,0,0,0,12.44,6.66l48-32a8,8,0,0,0,0-13.32ZM120,129.05V95l25.58,17ZM216,40H40A16,16,0,0,0,24,56V168a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V56A16,16,0,0,0,216,40Zm0,128H40V56H216V168Zm16,40a8,8,0,0,1-8,8H32a8,8,0,0,1,0-16H224A8,8,0,0,1,232,208Z"/>
                    </svg>
                  </div>`
                }
              </div>
              <div class="flex-1">
                <h3 class="text-white text-base font-medium">${playlist.name}</h3>
                <p class="text-[#9da2b9] text-sm">${playlist.songs.length} songs</p>
              </div>
            `;
            playlistElement.addEventListener('click', () => {
              showPlaylistSongs(playlist);
            });
            playlistsContainer.appendChild(playlistElement);
          });
        }, 1000);
      }

      function showPlaylistSongs(playlist) {
        currentPlaylist = playlist;
        const playlistsContainer = document.getElementById('playlists-container');
        playlistsContainer.innerHTML = `
          <div class="mb-4">
            <h3 class="text-white text-lg font-bold">${playlist.name}</h3>
            <p class="text-[#9da2b9] text-sm">${playlist.songs.length} songs</p>
          </div>
          <div class="space-y-2">
            ${playlist.songs.map((song, index) => `
              <div class="flex items-center gap-4 p-3 rounded-lg bg-[#1c1e27] cursor-pointer hover:bg-[#282b39]" onclick="playPlaylistSong(${index})">
                <img src="${song.thumbnail}" alt="${song.title}" class="w-12 h-12 rounded-lg">
                <div class="flex-1">
                  <h4 class="text-white text-sm font-medium">${song.title}</h4>
                  <p class="text-[#9da2b9] text-xs">${song.artist}</p>
                </div>
              </div>
            `).join('')}
          </div>
        `;
      }

      // Add function to play a specific song from playlist
      function playPlaylistSong(index) {
        if (currentPlaylist && index >= 0 && index < currentPlaylist.songs.length) {
          const song = currentPlaylist.songs[index];
          const video = {
            id: { videoId: song.id },
            snippet: {
              title: song.title,
              channelTitle: song.artist,
              thumbnails: { default: { url: song.thumbnail } }
            }
          };
          currentSongIndex = index;
          playVideo(video);
        }
      }

      // Initialize playlists
      document.addEventListener('DOMContentLoaded', () => {
        renderPlaylists();
      });

      // Add this function to check if song is in any playlist
      function isSongInAnyPlaylist(videoId) {
        return playlists.some(playlist => 
          playlist.songs.some(song => song.id === videoId)
        );
      }

      // Update the add-to-playlist button icon
      function updateAddToPlaylistButton() {
        const addToPlaylistBtn = document.getElementById('add-to-playlist-btn');
        if (currentVideo) {
          const isInPlaylist = isSongInAnyPlaylist(currentVideo.id.videoId);
          const icon = isInPlaylist ? 
            '<path d="M229.66,77.66l-128,128a8,8,0,0,1-11.32,0l-56-56a8,8,0,0,1,11.32-11.32L96,188.69,218.34,66.34a8,8,0,0,1,11.32,11.32Z"/>' :
            '<path d="M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"/>';
          
          addToPlaylistBtn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">${icon}</svg>`;
        }
      }

      // Add function to play similar song
      async function playSimilarSong() {
        if (!currentVideo) return;

        try {
          // Search for similar songs based on current song's title and artist
          const searchQuery = `${currentVideo.snippet.title} ${currentVideo.snippet.channelTitle} similar songs`;
          const response = await fetch(
            `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(searchQuery)}&type=video&maxResults=10&key=${API_KEY}`
          );
          const data = await response.json();
          
          if (data.items && data.items.length > 0) {
            // Filter out the current song and pick a random similar song
            const similarSongs = data.items.filter(item => item.id.videoId !== currentVideo.id.videoId);
            if (similarSongs.length > 0) {
              const randomIndex = Math.floor(Math.random() * similarSongs.length);
              const nextVideo = similarSongs[randomIndex];
              playVideo(nextVideo);
            }
          }
        } catch (error) {
          console.error('Error playing similar song:', error);
        }
      }
    </script>
  </body>
</html>
